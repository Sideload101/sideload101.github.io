<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Sideload101</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root { --bg: rgb(18,18,18); --panel: rgb(30,30,30); --panel2: rgb(25,25,25); }
html, body { margin:0; padding:0; height:100%; background:var(--bg); font-family: Helvetica, sans-serif; color:#fff; }
#svg { width:100%; display:flex; justify-content:center; padding-top:40px; overflow:hidden; }
#svg svg { width:100%; height:auto; display:block; max-width:min(150vh,150%); }

@media (max-width:800px) {
  .sticky-buttons { position: sticky; top:0; display:flex; flex-direction:column; background:var(--bg); z-index:20; }
  .toggle-btn { display:flex; justify-content:space-between; width:100%; padding:12px 16px; font-size:16px; background:var(--panel); border:0; color:#fff; cursor:pointer; }
  .toggle-btn .arrow { transition: transform 0.1s ease; }
  .content { height:0; overflow:hidden; background:var(--panel2); }
  .content svg { width:100%; height:auto; display:block; }
}
@media (min-width:801px) { .sticky-buttons { display:none; } }
</style>
</head>
<body>

<div class="sticky-buttons">
  <button class="toggle-btn" data-target="trollstore">TrollStore <span class="arrow">&#9654;</span></button>
  <div class="content" id="trollstore"></div>

  <button class="toggle-btn" data-target="altstore">AltStore <span class="arrow">&#9654;</span></button>
  <div class="content" id="altstore"></div>

  <button class="toggle-btn" data-target="sidestore">Sidestore <span class="arrow">&#9654;</span></button>
  <div class="content" id="sidestore"></div>

  <button class="toggle-btn" data-target="sideloadly">Sideloadly <span class="arrow">&#9654;</span></button>
  <div class="content" id="sideloadly"></div>
</div>

<div id="svg"></div>

<script>
(async function(){
  const svgContainer = document.getElementById('svg');
  const isMobile = window.innerWidth <= 800;

  async function fetchSVG(url, container){
    try {
      const r = await fetch(url);
      if(!r.ok) throw Error('Not found');
      container.innerHTML = await r.text();
    } catch(e){
      container.innerHTML = '<p style="color:#bbb;margin:0">Content unavailable: '+url+'</p>';
      console.warn('Failed to fetch', url, e);
    }
  }

  // Desktop SVG
  if(!isMobile){
    const ua = navigator.userAgent.toLowerCase();
    let file = 'macos.svg';
    if(ua.includes('windows')) file = 'windows.svg';
    await fetchSVG(file, svgContainer);
  }

  // Mobile buttons
  const toggles = document.querySelectorAll('.toggle-btn');

  toggles.forEach((btn, idx)=>{
    btn.addEventListener('click', async ()=>{
      const targetId = btn.dataset.target;
      const content = document.getElementById(targetId);
      const isActive = content.classList.contains('active');

      // Collapse others
      document.querySelectorAll('.content').forEach(c=>{
        if(c!==content && c.classList.contains('active')) collapse(c);
      });
      toggles.forEach(t=>{
        if(t!==btn) t.querySelector('.arrow').innerHTML='&#9654;';
      });

      if(!isActive){
        btn.querySelector('.arrow').innerHTML='&#9660;';
        await fetchSVG(`macos-mobile-${idx+1}.svg`, content);
        setTimeout(()=>expand(content), 50);
      } else {
        collapse(content);
        btn.querySelector('.arrow').innerHTML='&#9654;';
      }
    });
  });

  function expand(el){
    el.classList.add('active');
    const h = el.scrollHeight;
    el.style.height = '0';
    requestAnimationFrame(()=>{
      el.style.transition = 'height 0.6s cubic-bezier(0.05,0.7,0.2,1)';
      el.style.height = h + 'px';
    });
    el.addEventListener('transitionend', ()=>{
      el.style.height='';
      el.style.transition='';
    }, {once:true});
  }

  function collapse(el){
    const h = el.scrollHeight;
    el.style.height = h + 'px';
    requestAnimationFrame(()=>{
      el.style.transition = 'height 0.6s cubic-bezier(0.05,0.7,0.2,1)';
      el.style.height = '0';
    });
    el.addEventListener('transitionend', ()=>{
      el.classList.remove('active');
      el.style.height='';
      el.style.transition='';
    }, {once:true});
  }
})();
</script>
</body>
</html>