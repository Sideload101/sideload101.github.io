<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Sideload101</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root { --bg: rgb(18,18,18); --panel: rgb(30,30,30); --panel2: rgb(25,25,25); }
html, body { height:100%; margin:0; padding:0; background:var(--bg); color:#fff; font-family: Helvetica, sans-serif; }
#svg { width:100%; display:flex; justify-content:center; align-items:flex-start; padding-top:40px; box-sizing:border-box; overflow:hidden; }
#svg svg { width:100%; height:auto; display:block; max-width:min(150vh,150%); }

@media (max-width:800px) {
  .sticky-buttons { position: sticky; top:0; z-index:20; display:flex; flex-direction:column; background:var(--bg); }
  .toggle-btn { display:flex; align-items:center; justify-content:space-between; width:100%; padding:12px 16px; background:var(--panel); border:0; color:#fff; font-size:16px; cursor:pointer; }
  .toggle-btn .arrow { font-size:18px; transition: transform .1s ease; }

  .content { height:0; overflow:hidden; background:var(--panel2); box-sizing:border-box; }
  .content svg { width:100%; height:auto; display:block; margin:0; }
}

@media (min-width:801px) { .sticky-buttons { display:none; } }
</style>
</head>
<body>

<div class="sticky-buttons">
  <button class="toggle-btn" data-target="trollstore">TrollStore <span class="arrow">&#9654;</span></button>
  <div class="content" id="trollstore"></div>

  <button class="toggle-btn" data-target="altstore">AltStore <span class="arrow">&#9654;</span></button>
  <div class="content" id="altstore"></div>

  <button class="toggle-btn" data-target="sidestore">Sidestore <span class="arrow">&#9654;</span></button>
  <div class="content" id="sidestore"></div>

  <button class="toggle-btn" data-target="sideloadly">Sideloadly <span class="arrow">&#9654;</span></button>
  <div class="content" id="sideloadly"></div>
</div>

<div id="svg"></div>

<script>
(async function(){
const svgContainer = document.getElementById('svg');
const isMobile = window.innerWidth <= 800;

async function fetchToContainer(url, container){
  try {
    const res = await fetch(url);
    if(!res.ok) throw Error('Not found');
    container.innerHTML = await res.text();
  } catch(e){
    container.innerHTML='<p style="color:#bbb;margin:0">Content unavailable: '+url+'</p>';
    console.warn('Failed to fetch',url,e);
  }
}

// Desktop: detect OS
if(!isMobile){
  const ua=navigator.userAgent.toLowerCase();
  let svgFile='windows.svg';
  if(ua.includes('macintosh')||ua.includes('mac os')||ua.includes('mac os x')) svgFile='macos.svg';
  fetchToContainer(svgFile, svgContainer);
}

// Mobile buttons: smooth expand/collapse after SVG loaded
const toggles = document.querySelectorAll('.toggle-btn');
toggles.forEach((btn, idx)=>{
  const targetId = btn.dataset.target;
  const content = document.getElementById(targetId);

  btn.addEventListener('click', async ()=>{
    const isActive = content.classList.contains('active');

    // collapse all others
    document.querySelectorAll('.content').forEach(c=>{
      if(c!==content && c.classList.contains('active')) collapse(c);
    });
    toggles.forEach(t=>{ if(t!==btn) t.querySelector('.arrow').innerHTML='&#9654;'; });

    if(!isActive){
      btn.querySelector('.arrow').innerHTML='&#9660;';
      await fetchToContainer(`windows-mobile-${idx+1}.svg`, content);
      requestAnimationFrame(()=>expand(content));
    } else {
      collapse(content);
      btn.querySelector('.arrow').innerHTML='&#9654;';
    }
  });
});

function expand(el){
  el.classList.add('active');
  const height = el.scrollHeight;
  el.style.height = '0';
  requestAnimationFrame(()=>{
    el.style.transition = 'height 0.6s cubic-bezier(0.05,0.7,0.2,1)';
    el.style.height = height + 'px';
  });
  el.addEventListener('transitionend', ()=>{
    el.style.height='';
    el.style.transition='';
  }, {once:true});
}

function collapse(el){
  const height = el.scrollHeight;
  el.style.height = height + 'px';
  requestAnimationFrame(()=>{
    el.style.transition = 'height 0.6s cubic-bezier(0.05,0.7,0.2,1)';
    el.style.height = '0';
  });
  el.addEventListener('transitionend', ()=>{
    el.classList.remove('active');
    el.style.height='';
    el.style.transition='';
  }, {once:true});
}
})();
</script>
</body>
</html>